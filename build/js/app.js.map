{"version":3,"sources":["attributelist.js","app.js","tabs.js"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["'use strict';\r\n    \r\n let wrapper = (fn) => {\r\n    return function() {\r\n        if (arguments[1] === Object(arguments[1]) && !Array.isArray(arguments[1])) {\r\n            for(var attr in arguments[1]){\r\n                fn.call(null, arguments[0], attr, arguments[1][attr]);\r\n            }\r\n        } else if(Array.isArray(arguments[1])){\r\n            var el = arguments[0];\r\n            arguments[1].forEach(function(a){\r\n                fn.call(null, el, a);\r\n            });\r\n        } else {\r\n            fn.apply(null, arguments);\r\n        }\r\n    };\r\n};\r\n\r\nlet attributelist = {\r\n    set: function(el, attr) {\r\n        wrapper(function(e, a, v){\r\n            e.setAttribute(a, v);\r\n        })(el, attr);\r\n    },\r\n    toggle: function(el, attr) {\r\n        wrapper(function(e, a){\r\n            e.setAttribute(a, (e.getAttribute(a) === 'false' ? true : false));\r\n        })(el, attr);\r\n    }\r\n};\r\n\r\nexport default attributelist;","'use strict';\n\nimport { Tabs } from './tabs';\n\nTabs.init('.js-tabs');","'use strict';\n\nimport attributelist from './attributelist'\n\nlet KEY_CODES = {\n            RETURN: 13,\n            TAB: 9\n        },\n        instances = [],\n        triggerEvents = ['click', 'keydown', 'touchstart'],\n        defaults = {\n            titleClass: '.js-tabs__link',\n            currentClass: 'active',\n            active: 0,\n\t\t\tstyles: [\n\t\t\t\t{\n\t\t\t\t\tposition: 'absolute',\n            \t\tclip: 'rect(0, 0, 0, 0)'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tposition: 'relative',\n\t\t\t\t\tclip:'auto'\n\t\t\t\t}]\n        },\n        StormTabs = {\n            init() {\n                let hash = location.hash.slice(1) || null;\n                this.links = [].slice.call(this.DOMElement.querySelectorAll(this.settings.titleClass));\n                this.targets = this.links.map(el => {\n                    return document.getElementById(el.getAttribute('href').substr(1)) || console.error('Tab target not found');\n                 });\n\n                this.current = this.settings.active;\n                if (!!hash) {\n                    this.targets.forEach((target, i) => {\n                        if (target.getAttribute('id') === hash) {\n                            this.current = i;\n                        }\n                    });\n                }\n                \n                this.initAria()\n                    .initTitles()\n\t\t\t\t\t.setStyles()\n                    .open(this.current);\n            },\n            initAria() {\n                this.links.forEach((el, i) => {\n                    attributelist.set(el, {\n                        'role' : 'tab',\n                        'aria-expanded' : false,\n                        'aria-selected' : false,\n                        'aria-controls' : this.targets[i].getAttribute('id')\n                    });\n                });\n\n                this.targets.forEach(el => {\n                    attributelist.set(el, {\n                        'role' : 'tabpanel',\n                        'aria-hidden' : true,\n                        'tabIndex': '-1'\n                    });\n                });\n                return this;\n            },\n            initTitles() {\n                let handler = i => {\n                    this.toggle(i);\n                };\n\n                this.links.forEach((el, i) => {\n                    triggerEvents.forEach(ev => {\n                        el.addEventListener(ev, e => {\n                            if(!!e.keyCode && e.keyCode === KEY_CODES.TAB) { return; }\n                            if(!!!e.keyCode || e.keyCode === KEY_CODES.RETURN){\n                                e.preventDefault();\n                                handler.call(this, i);\n                            }\n                        }, false);\n                    });\n                    \n                });\n\n                return this;\n            },\n\t\t\tsetStyles() {\n\t\t\t\tthis.targets.forEach((target, i) => {\n\t\t\t\t\tfor(let s in this.settings.styles[Number(i === this.current)]) {\n\t\t\t\t\t\ttarget.style[s] = this.settings.styles[Number(i === this.current)][s];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\treturn this;\n\t\t\t},\n            change(type, i) {\n                let methods = {\n                        open: {\n                            classlist: 'add',\n                            tabIndex: {\n                                target: this.targets[i],\n                                value: '0'\n                            }\n                        },\n                        close: {\n                            classlist: 'remove',\n                            tabIndex: {\n                                target: this.targets[this.current],\n                                value: '-1'\n                            }\n                        }\n                    };\n\n                this.links[i].classList[methods[type].classlist](this.settings.currentClass);\n                this.targets[i].classList[methods[type].classlist](this.settings.currentClass);\n                attributelist.toggle(this.targets[i], 'aria-hidden');\n                attributelist.toggle(this.links[i], ['aria-selected', 'aria-expanded']);\n                attributelist.set(methods[type].tabIndex.target, {\n                    'tabIndex': methods[type].tabIndex.value\n                });\n            },\n            open(i) {\n                this.change('open', i);\n                this.current = i;\n\t\t\t\tthis.setStyles();\n                return this;\n            },\n            close(i) {\n                this.change('close', i);\n\t\t\t\tthis.setStyles();\n                return this;\n            },\n            toggle(i) {\n                if(this.current === i) { return; }\n                \n                 window.history.pushState({ URL: this.links[i].getAttribute('href') }, '', this.links[i].getAttribute('href'));\n                if(this.current === null) { \n                    this.open(i);\n                    return this;\n                }\n                    this.close(this.current)\n                    .open(i);\n                return this;\n                }\n            };\n\n\t\nlet create = (el, i, opts) => {\n    instances[i] = Object.assign(Object.create(StormTabs), {\n        DOMElement: el,\n        settings: Object.assign({}, defaults, opts)\n    });\n    instances[i].init();\n}\n\nlet init = (sel, opts) => {\n    var els = [].slice.call(document.querySelectorAll(sel));\n    \n    if(els.length === 0) {\n        throw new Error('Tabs cannot be initialised, no augmentable elements found');\n    }\n    \n    els.forEach((el, i) => {\n        create(el, i, opts);\n    });\n    return instances;\n    \n}\n\nlet reload = (sel, opts) => {\n    [].slice.call(document.querySelectorAll(sel)).forEach((el, i) => {\n        if(!instances.filter(instance => { return (instance.btn === el); }).length) {\n            create(el, instances.length, opts);\n        }\n    });\n}\n\nlet destroy = () => {\n    instances = [];  \n}\n\nlet Tabs = { init, reload, destroy }\n\nexport { Tabs };"],"sourceRoot":"/source/"}